<script>
  import { fly } from "svelte/transition";

  import Section from "../atoms/section/index.svelte";
  import Title from '../atoms/title/index.svelte';
  import style from "./style.pcss";

  import img1 from "../../assets/photos/cool-and-cute-1.jpeg";
  import img2 from "../../assets/photos/cool-and-cute-2.jpeg";
  import img3 from "../../assets/photos/cool-and-cute-3.jpeg";

  const images = [
    null,
    {
      src: img1,
      alt: "–¢–∞–Ω–µ—á–∫–∞ –∫—Ä—É—Ç–∞—è",
    },
    {
      src: img3,
      alt: "–¢–∞–Ω–µ—á–∫–∞ –Ω–µ–∂–Ω–∞—è",
    },
    {
      src: img2,
      alt: "–¢–∞–Ω–µ—á–∫–∞ –Ω–µ–∂–Ω–∞—è –∏ –∫—Ä—É—Ç–∞—è",
    },
  ];

  const texts = [
    "–ö–∞–∫–∞—è –∂–µ –æ–Ω–∞?",
    "–û–Ω–∞ –∫—Ä—É—Ç–∞—è!",
    "–û–Ω–∞ –Ω–µ–∂–Ω–∞—è!",
    "–û–Ω–∞ –∏ –∫—Ä—É—Ç–∞—è, –∏ –Ω–µ–∂–Ω–∞—è!",
  ];

  let currentStep = 0;

  function handleClick() {
    currentStep = currentStep === images.length - 1 ? 0 : currentStep + 1;
  }
</script>

<Section class={style.coolAndCute}>
  <span class={style.emoji}>üòç</span>
  <Title
  class={style.title}
    count={2}
    content="–¢–∞–Ω–µ—á–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–∫–æ–π —É–≥–æ–¥–Ω–æ"
  />
  <div class={style.card}>
    {#each images as image, index}
      {#if index <= currentStep && image}
        <img
          in:fly={{
            duration: 300,
            x: 400,
          }}
          out:fly={{
            x: -400
          }}
          class={style.image}
          src={image.src}
          alt={image.alt}
        />
      {/if}
    {/each}
    <span class={`gradientText ${style.cardText}`}>?</span>
  </div>
  <p class={style.text}>{texts[currentStep]}</p>
  <button class={style.button} on:click={handleClick}>
    {currentStep === 0
      ? "–£–∑–Ω–∞—Ç—å –∫–∞–∫–∞—è –æ–Ω–∞"
      : currentStep === images.length - 1
      ? "–¢–∞–∫–æ–≥–æ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å!"
      : "–ê –µ—â—ë?"}
  </button>
</Section>
